---

#- name: create directory for pgbouncer
  #file:
    #path: /pgbouncer-1.8.1
    #state: directory
    #mode: 0755
  
- name: download pgbouncer source
  unarchive:
    src: https://pgbouncer.github.io/downloads/files/1.8.1/pgbouncer-1.8.1.tar.gz
    dest: /
    remote_src: yes

- name: download devel packages
  package: name={{ item }} state=present
  with_items:
    - gcc
    - libevent-devel
    - openssl-devel
    
- name: configure the pgbouncer
  shell: ./configure --prefix=/usr
  args:
    chdir: /pgbouncer-1.8.1

- name: make 
  shell: make
  args:
    chdir: /pgbouncer-1.8.1
    
- name: make install
  shell: make install
  args:
    chdir: /pgbouncer-1.8.1
